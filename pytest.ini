[pytest]
# ----------------------------------------------------------------------
# Pytest configuration for Insightful-Orders
# ----------------------------------------------------------------------

# Custom markers
markers =
    integration: marks tests as integration (deselect with '-m "not integration"')

# Ensure local "app" package is importable (project root is added to sys.path)
pythonpath = .

# Warnings configuration
filterwarnings =
    # Fail deprecations if they come from *our* code
    error::DeprecationWarning:app\.
    error::DeprecationWarning:tests\.

    # Show all other warnings by default
    default

    # Suppress known 3rd-party deprecations (match by module)
    ignore::DeprecationWarning:marshmallow_sqlalchemy\.
    ignore::DeprecationWarning:passlib\.

    # Suppress noisy unclosed socket warnings during WS/HTTP parsing
    ignore:unclosed.*<socket\.socket.*>:ResourceWarning
